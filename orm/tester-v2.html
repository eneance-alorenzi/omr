<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">

    <link rel='stylesheet prefetch' href='./lib/organigram/css/organigram.css'>

    <script src="https://cdn.rawgit.com/eligrey/canvas-toBlob.js/f1a01896135ab378aa5c0118eadd81da55e698d8/canvas-toBlob.js"></script>
    <script src="https://cdn.rawgit.com/eligrey/FileSaver.js/e9d941381475b5df8b7d7691013401e171014e89/FileSaver.min.js"></script>

    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src='./lib/organigram/js/organigram-v2.js'></script>

</head>

<body>

<div class="chart-container" style=" padding-top:10px; width:1200px; height:1200px "> </div>

<script>
    chart = null;
    //d3.json('https://gist.githubusercontent.com/bumbeishvili/dc0d47bc95ef359fdc75b63cd65edaf2/raw/c33a3a1ef4ba927e3e92b81600c8c6ada345c64b/orgChart.json')
    //d3.json('https://raw.githubusercontent.com/bumbeishvili/Assets/master/Projects/D3/Organization%20Chart/redesignedChartLongData.json')
    //d3.json('https://gitlab.com/eneance-alorenzi/test-data-omr/raw/master/omr.json', {mode: 'no-cors'})
    //d3.json('https://www.mocky.io/v2/5e33058a32000078c894d369', {mode: 'no-cors'})
    //d3.json('/Users/arnaudlorenzi/eneance/git/lvmh/orm/orm/app/lib/organigram/data.json', {mode: 'no-cors'})
    //d3.json('https://relais.sephora.fr/pr/detailPointsRelais?id=0908U&type=shipChronoRelais&country=FR&language=fr', {mode: 'no-cors'})
    d3.json('https://raw.githubusercontent.com/eneance-alorenzi/omr/master/orm/data.json')
        .then(data => {
            chart = new TreeChart()
                .container('.chart-container')
                //.data(data)
                .template("next")
                .rawData(data)
                .flattenData()
                .svgWidth(window.innerWidth)
                .svgHeight(window.innerWidth)
                .initialZoom(0.6)
                .backgroundColor('#ffffff')
                .defaultTextFill('#000000')
                .nodeTextFill('#000000')
                //.onNodeClick(d=> {console.log(d+' node clicked'); toggle(d); })
                .onNodeClick((nodeId, node, chart) => {
                    console.log(nodeId+' node clicked');

                    //chart.toggle(nodeId);
                    //chart.setExpanded(nodeId);
                    //chart.removeNode(nodeId);
                })
                .render()
        });

   // const TreeChart = require ('https://bundle.run/d3-org-chart@1.0.4');

    // console.dir(new TreeChart().container);
    //
    // new TreeChart()
    //     .container('.chart-container')
    //     .data(data)
    //     .svgWidth(width)
    //     .initialZoom(0.4)
    //     .onNodeClick(d=> console.log(d+' node clicked'))
    //     .render()
</script>

</body>

</html>